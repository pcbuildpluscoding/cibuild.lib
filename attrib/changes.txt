refactored to simplify step config arrangement
